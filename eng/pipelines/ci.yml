# CI Pipeline

schedules:
  - cron: "0 0 * * *"  # Nightly at midnight
    displayName: "Nightly Build"
    branches:
      include:
        - develop
        - main
        - feature/chat

# Run on pushes to these branches
trigger:
  branches:
    include:
      - feature/chat
      - emlyn/ci-yaml-nightly-job

# Run on PRs to these branches
pr:
  - main
  - develop
  - release/*
  - feature/chat

variables:
  targetingChatBranch: $[ eq(variables['System.PullRequest.TargetBranch'], 'feature/chat') ]
  isChatFeature: $[ or(contains(variables['Build.SourceBranch'], 'chat'), contains(variables['Build.SourceBranch'], 'Chat')) ]
  buildChat: or($(isChatFeature), $(targetingChatBranch))

jobs:
  - template: jobs/CI-build-job.yml
  # - template: UI-test-job.yml

  